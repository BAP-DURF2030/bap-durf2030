{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { makeObservable, observable, action } from 'mobx';\nimport AuthService from '../services/AuthService';\nimport User from '../models/User';\n\nclass UiStore {\n  constructor(rootStore) {\n    _defineProperty(this, \"onAuthStateChanged\", user => {\n      if (user) {\n        console.log(`de user is ingelogd ${user.email}`);\n        this.setCurrentUser(new User({\n          id: user.uid,\n          name: user.displayName,\n          email: user.email,\n          store: this.rootStore.userStore,\n          avatar: user.photoURL\n        }));\n      } else {\n        console.log(`de user is uitgelogd`);\n        this.setCurrentUser(undefined);\n      }\n    });\n\n    _defineProperty(this, \"loginUser\", async user => {\n      //service aanspreken\n      const result = await this.authService.login(user.email, user.password);\n      return result;\n    });\n\n    _defineProperty(this, \"logoutUser\", async () => {\n      const result = await this.authService.logout();\n      return result;\n    });\n\n    _defineProperty(this, \"registerUser\", async user => {\n      const result = await this.authService.register(user.name, user.email, user.password, user.avatar);\n      return result;\n    });\n\n    this.rootStore = rootStore;\n    this.currentUser = undefined;\n    this.authService = new AuthService(this.rootStore.firebase, this.onAuthStateChanged);\n    makeObservable(this, {\n      currentUser: observable,\n      setCurrentUser: action\n    });\n  }\n\n  setCurrentUser(user) {\n    this.currentUser = user;\n  }\n\n}\n\nexport default UiStore;","map":{"version":3,"sources":["/Users/sarahvandenberghe/School/Devine/20202021/Bachelorproef/Code/nextjs/src/stores/UiStore.js"],"names":["makeObservable","observable","action","AuthService","User","UiStore","constructor","rootStore","user","console","log","email","setCurrentUser","id","uid","name","displayName","store","userStore","avatar","photoURL","undefined","result","authService","login","password","logout","register","currentUser","firebase","onAuthStateChanged"],"mappings":";;AAAA,SAASA,cAAT,EAAyBC,UAAzB,EAAqCC,MAArC,QAAmD,MAAnD;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;;AAEA,MAAMC,OAAN,CAAc;AACZC,EAAAA,WAAW,CAACC,SAAD,EAAY;AAAA,gDAcDC,IAAD,IAAU;AAC7B,UAAIA,IAAJ,EAAU;AACRC,QAAAA,OAAO,CAACC,GAAR,CAAa,uBAAsBF,IAAI,CAACG,KAAM,EAA9C;AACA,aAAKC,cAAL,CACE,IAAIR,IAAJ,CAAS;AACPS,UAAAA,EAAE,EAAEL,IAAI,CAACM,GADF;AAEPC,UAAAA,IAAI,EAAEP,IAAI,CAACQ,WAFJ;AAGPL,UAAAA,KAAK,EAAEH,IAAI,CAACG,KAHL;AAIPM,UAAAA,KAAK,EAAE,KAAKV,SAAL,CAAeW,SAJf;AAKPC,UAAAA,MAAM,EAAEX,IAAI,CAACY;AALN,SAAT,CADF;AASD,OAXD,MAWO;AACLX,QAAAA,OAAO,CAACC,GAAR,CAAa,sBAAb;AACA,aAAKE,cAAL,CAAoBS,SAApB;AACD;AACF,KA9BsB;;AAAA,uCAgCX,MAAOb,IAAP,IAAgB;AAC1B;AACA,YAAMc,MAAM,GAAG,MAAM,KAAKC,WAAL,CAAiBC,KAAjB,CAAuBhB,IAAI,CAACG,KAA5B,EAAmCH,IAAI,CAACiB,QAAxC,CAArB;AACA,aAAOH,MAAP;AACD,KApCsB;;AAAA,wCAsCV,YAAY;AACvB,YAAMA,MAAM,GAAG,MAAM,KAAKC,WAAL,CAAiBG,MAAjB,EAArB;AACA,aAAOJ,MAAP;AACD,KAzCsB;;AAAA,0CA2CR,MAAOd,IAAP,IAAgB;AAC7B,YAAMc,MAAM,GAAG,MAAM,KAAKC,WAAL,CAAiBI,QAAjB,CACnBnB,IAAI,CAACO,IADc,EAEnBP,IAAI,CAACG,KAFc,EAGnBH,IAAI,CAACiB,QAHc,EAInBjB,IAAI,CAACW,MAJc,CAArB;AAMA,aAAOG,MAAP;AACD,KAnDsB;;AACrB,SAAKf,SAAL,GAAiBA,SAAjB;AACA,SAAKqB,WAAL,GAAmBP,SAAnB;AACA,SAAKE,WAAL,GAAmB,IAAIpB,WAAJ,CACjB,KAAKI,SAAL,CAAesB,QADE,EAEjB,KAAKC,kBAFY,CAAnB;AAKA9B,IAAAA,cAAc,CAAC,IAAD,EAAO;AACnB4B,MAAAA,WAAW,EAAE3B,UADM;AAEnBW,MAAAA,cAAc,EAAEV;AAFG,KAAP,CAAd;AAID;;AAyCDU,EAAAA,cAAc,CAACJ,IAAD,EAAO;AACnB,SAAKoB,WAAL,GAAmBpB,IAAnB;AACD;;AAxDW;;AA2Dd,eAAeH,OAAf","sourcesContent":["import { makeObservable, observable, action } from 'mobx';\nimport AuthService from '../services/AuthService';\nimport User from '../models/User';\n\nclass UiStore {\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    this.currentUser = undefined;\n    this.authService = new AuthService(\n      this.rootStore.firebase,\n      this.onAuthStateChanged\n    );\n\n    makeObservable(this, {\n      currentUser: observable,\n      setCurrentUser: action,\n    });\n  }\n\n  onAuthStateChanged = (user) => {\n    if (user) {\n      console.log(`de user is ingelogd ${user.email}`);\n      this.setCurrentUser(\n        new User({\n          id: user.uid,\n          name: user.displayName,\n          email: user.email,\n          store: this.rootStore.userStore,\n          avatar: user.photoURL,\n        })\n      );\n    } else {\n      console.log(`de user is uitgelogd`);\n      this.setCurrentUser(undefined);\n    }\n  };\n\n  loginUser = async (user) => {\n    //service aanspreken\n    const result = await this.authService.login(user.email, user.password);\n    return result;\n  };\n\n  logoutUser = async () => {\n    const result = await this.authService.logout();\n    return result;\n  };\n\n  registerUser = async (user) => {\n    const result = await this.authService.register(\n      user.name,\n      user.email,\n      user.password,\n      user.avatar\n    );\n    return result;\n  };\n\n  setCurrentUser(user) {\n    this.currentUser = user;\n  }\n}\n\nexport default UiStore;\n"]},"metadata":{},"sourceType":"module"}